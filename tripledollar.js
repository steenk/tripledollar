/* tripledollar v.0.7.1, (c) 2014 Steen Klingberg. License MIT. */
(function(){var e="0.7.1";var t=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]!=="string"){if(Object.prototype.toString.call(e[0])==="[object Array]"){return t.apply(this,e[0])}}var n=e.shift(),i=n.split(/[\.#]/),r=n.split(/[^\.#]+/),a;if(r[0]==""){r.shift()}for(var o=0;o<i.length;o++){if(o===0){a=document.createElement(i[o])}else{if(r[o-1]==="."){a.classList.add(i[o])}else if(r[o-1]==="#"){a.setAttribute("id",i[o])}}}function s(e){for(var n=0;n<e.length;n++){var i=e[n];if(i&&i.nodeType){a.appendChild(i)}else if(typeof i==="object"){if(Object.prototype.toString.call(i)==="[object Array]"){a.appendChild(t.apply(this,i))}else{for(var r in i){if(r.match(/^data./)){var o=r.substr(4).toLowerCase();a.setAttribute("data-"+o,i[r])}else{a.setAttribute(r,i[r])}}}}else{a.appendChild(document.createTextNode(String(i)))}}}s(e);a.css=function(e){for(var t in e){this.style[t]=e[t]}return this};a.set=function(e,t){this[e]=t;return this};a.fun=function(e){var t=Array.prototype.slice.call(arguments,1);this[e].apply(this,t);return this};a.evt=function(e,t){if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);if(this.addEventListener){this.addEventListener(e,function(e){var i=[e].concat(n);t.apply(this,i)},false)}else{this.attachEvent("on"+e,function(e){var i=[e].concat(n);t.apply(this,i)})}}else{if(this.addEventListener){this.addEventListener(e,t,false)}else{this.attachEvent("on"+e,t)}}return this};a.ins=function(){var e=Array.prototype.slice.call(arguments);s(e);return this};a.query=a.querySelector;a.queryAll=a.querySelectorAll;a.prototype=a;return a};t.version=e;t.structify=function(e){var t=null;if(e.nodeType===1){function n(e){var t=[],i=e.localName,r=String(e.className).replace(" ",".");if(r){i+="."+r}if(e.id){i+="#"+e.id}t.push(i);if(e.hasAttributes()){var a=e.attributes,o={};for(var s=0;s<a.length;s++){if(!a[s].name.match(/id|class|contenteditable/)){o[a[s].name]=a[s].value}}if(Object.keys(o).length>0){t.push(o)}}e.normalize();var l=e.childNodes;for(var s=0;s<l.length;s++){if(l[s].nodeType===3){var c=l[s].data.replace(/\s\s*/," ").trim();if(c.length>0){t.push(c)}}else if(l[s].nodeType===1){t.push(n(l[s]))}}return t}t=n(e)}return t};t.onReady=function(e){if(document.readyState==="complete"){e()}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",e,false)}else{document.attachEvent("onreadystatechange",e)}};var n;if(window.setImmediate){n=window.setImmediate}else{var i=[],r="doNext"+(Math.random()*67108864|0).toString(16),a=function(e){if(e.source===window&&typeof e.data==="string"&&e.data.indexOf(r)===0){var t=i.shift();t.length>0&&t[0].apply(null,t.splice(1))}};if(window.postMessage){if(window.addEventListener){window.addEventListener("message",a,false)}else{window.attachEvent("message",a)}}n=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]==="function"){i.push(e);window.postMessage(r,"*")}}}t.setImmediate=n;t.appendToDoc=function(){var e=Array.prototype.slice.call(arguments),i=this;i.follow=[];i.emit=function(){i.follow.forEach(function(e){n(e)})};i.then=function(e){if(typeof e==="function"){i.follow.push(e)}else{console.log('$$$: Only functions can be passed to "then()"!')}return i};t.onReady(function(){for(var r=0;r<e.length;r++){if(Object.prototype.toString.call(e[r])==="[object Array]"){document.body.appendChild(t(e[r]))}else if(e[r]instanceof HTMLElement){document.body.appendChild(e[r])}else if(typeof e[r]==="function"){e[r]()}}n(i.emit)});return i};if(typeof define==="function"){define(function(e){return t})}else{window.$$$=t;window.tripledollar=t.appendToDoc}t.query=function(e){return document.querySelector(e)};t.queryAll=function(e){return document.querySelectorAll(e)}})();