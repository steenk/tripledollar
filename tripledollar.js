/* tripledollar v.0.8.0, (c) 2015 Steen Klingberg. License MIT. */
(function(){"use strict";var e="0.8.0",t={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n=function(){var e=Array.prototype.slice.call(arguments),i,r,o,s,a,l;if(typeof e[0]!=="string"){if(Object.prototype.toString.call(e[0])==="[object Array]"){return n.apply(this,e[0])}return}i=e.shift();r=i.split(/[\.#]/);o=i.split(/[^\.#]+/);if(o[0]===""){o.shift()}for(a=0;a<r.length;a++){if(r[a]&&!r[a].match(/^[A-Za-z][A-Za-z0-9-_\.:#]*$/)){return}if(a===0){l=r[0].split(":");if(Object.keys(t).indexOf(l[0])>-1){s=document.createElementNS(t[l[0]],l[1]||l[0])}else{s=document.createElement(l[1]||l[0])}}else{if(o[a-1]==="."){s.classList.add(r[a])}else if(o[a-1]==="#"){s.setAttribute("id",r[a])}}}function c(e){var i,r,o,a,l;for(r=0;r<e.length;r++){i=e[r];if(i&&i.nodeType){s.appendChild(i)}else if(typeof i==="object"){if(Object.prototype.toString.call(i)==="[object Array]"){s.appendChild(n.apply(this,i))}else{for(a in i){if(i.hasOwnProperty(a)){if(a.match(/^data./)){l=a.substr(4).toLowerCase();s.setAttribute("data-"+l,i[a])}else{o=a.split(":");if(o.length===2&&Object.keys(t).indexOf(o[0])>-1){s.setAttributeNS(t[o[0]],o[1],i[a])}else{s.setAttribute(a,i[a])}}}}}}else{s.appendChild(document.createTextNode(String(i)))}}}c(e);s.css=function(e){var t;for(t in e){if(e.hasOwnProperty(t)){this.style[t]=e[t]}}return this};s.set=function(e,t){this[e]=t;return this};s.fun=function(e){var t=Array.prototype.slice.call(arguments,1);this[e].apply(this,t);return this};s.evt=function(e,t){if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);if(this.addEventListener){this.addEventListener(e,function(e){var i=[e].concat(n);t.apply(this,i)},false)}else{this.attachEvent("on"+e,function(e){var i=[e].concat(n);t.apply(this,i)})}}else{if(this.addEventListener){this.addEventListener(e,t,false)}else{this.attachEvent("on"+e,t)}}return this};s.ins=function(){c(Array.prototype.slice.call(arguments));return this};s.query=s.querySelector;s.queryAll=s.querySelectorAll;s.prototype=s;return s},i,r,o,s;n.version=e;n.structify=function(e){var t=null,n;if(e.nodeType===1){n=function(e){var t=[],i,r,o,s,a,l=e.localName,c=String(e.className).replace(" ",".");if(c){l+="."+c}if(e.id){l+="#"+e.id}t.push(l);if(e.hasAttributes()){r=e.attributes;i={};for(a=0;a<r.length;a++){if(!r[a].name.match(/id|class|contenteditable/)){i[r[a].name]=r[a].value}}if(Object.keys(i).length>0){t.push(i)}}e.normalize();o=e.childNodes;for(a=0;a<o.length;a++){if(o[a].nodeType===3){s=o[a].data.replace(/\s\s*/," ").trim();if(s.length>0){t.push(s)}}else if(o[a].nodeType===1){t.push(n(o[a]))}}return t};t=n(e)}return t};n.onReady=function(e){if(document.readyState==="complete"||document.readyState==="interactive"){e()}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",e,false)}else{document.attachEvent("onreadystatechange",e)}};if(window.setImmediate){i=window.setImmediate}else{o=[];s="doNext"+(Math.random()*67108864|0).toString(16);r=function(e){if(e.source===window&&typeof e.data==="string"&&e.data.indexOf(s)===0){var t=o.shift();if(t.length>0){t[0].apply(null,t.splice(1))}}};if(window.postMessage){if(window.addEventListener){window.addEventListener("message",r,false)}else{window.attachEvent("message",r)}}i=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]==="function"){o.push(e);window.postMessage(s,"*")}}}n.setImmediate=i;n.appendToDoc=function a(){var e=Array.prototype.slice.call(arguments),t,r=[],o=function(){r.forEach(function(e){i(e)})};a.then=function(e){if(typeof e==="function"){r.push(e)}else{console.log('$$$: Only functions can be passed to "then()"!')}return a};n.onReady(function(){for(t=0;t<e.length;t++){if(Object.prototype.toString.call(e[t])==="[object Array]"){document.body.appendChild(n(e[t]))}else if(e[t]instanceof window.HTMLElement||e[t]instanceof window.SVGSVGElement){document.body.appendChild(e[t])}else if(typeof e[t]==="function"){e[t]()}}i(o)});return a};if(typeof window.define==="function"){window.define(function(){return n})}else{window.$$$=n;window.tripledollar=n.appendToDoc}n.query=function(e){return document.querySelector(e)};n.queryAll=function(e){return document.querySelectorAll(e)}})();